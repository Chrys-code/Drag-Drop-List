(()=>{"use strict";const e=()=>{const e=document.querySelectorAll("#del-list_el");return e.forEach((e=>{e.addEventListener("click",(e=>{"del-list_el"===e.target.id&&e.target.parentElement.remove()}))})),e};function t(){return JSON.parse(localStorage.getItem("draglist"))||[]}function n(e){localStorage.setItem("draglist",JSON.stringify(e))}function l(){const e=document.querySelectorAll(".title");let t=[],n=1;return e.forEach((e=>{const l=document.querySelectorAll(".list_el");let i={index:n,title:e.textContent,items:[]};l.forEach((t=>{t.id===e.id&&i.items.push(t.textContent)})),t.push(i),n++})),console.log(t),t}const i=(e,t)=>{function n(e,t){return[...e.querySelectorAll(".draggable_item:not(.dragging)")].reduce(((e,n)=>{const l=n.getBoundingClientRect(),i=t-l.top-l.height/2;return i<0&&i>e.offset?{offset:i,element:n}:e}),{offset:Number.NEGATIVE_INFINITY}).element}return{selector:void e.forEach((e=>{e.addEventListener("dragstart",(t=>{e.classList.add("dragging")})),e.addEventListener("dragend",(t=>{var n=e.parentElement.id.split("_")[1];e.childNodes[1].id=n,e.classList.remove("dragging")}))})),adjacentCont:void t.forEach((e=>{e.addEventListener("dragover",(t=>{t.preventDefault();const l=document.querySelector(".dragging");null==n(e,t.clientY)?e.appendChild(l):e.insertBefore(l,n(e,t.clientY))}))}))}};let r=1;function d(t){(e=>{const t=document.querySelector(".wrapper");var n=document.createElement("div");n.setAttribute("id",`container_${e.index}`),n.setAttribute("class","container"),n.innerHTML=`\n        <div class="card_${e.index}">\n            <div class="header">\n                <h3 id="${e.index}" class="title">${e.title}</h3>\n                <button id="del-list" value="${e.index}" type="submit">X</button>\n            </div>\n            <div class="body">\n                <div class="input_container">\n                    <input type="text" id='list_${e.index}_input' placeholder="Add to list"/>\n                    <button id='add-list_el' class="add-list_el" value="${e.index}" type="submit" >+</button>\n                </div>\n                <ul id="list_${e.index}" class='list'>\n                    \x3c!-- Draggable list content --\x3e\n                    ${e.items&&e.items.map((t=>`<div class="list_el_wrapper draggable_item" draggable="true">\n                            <li id="${e.index}" class="list_el">${t}</li>\n                            <button id="del-list_el" value=${t} type="submit">X</button>\n                            </div>`)).join(" ")}\n                </ul>    \n            </div>\n        </div>\n        `,t.appendChild(n)})(t),(()=>{const e=document.querySelectorAll("#add-list_el");return e[e.length-1].addEventListener("click",(()=>{const t=document.querySelector(`#list_${e[e.length-1].value}`),n=document.querySelector(`#list_${e[e.length-1].value}_input`),l=document.createElement("div");l.setAttribute("class","list_el_wrapper draggable_item"),l.setAttribute("draggable","true"),l.innerHTML=`\n                <li id="${e[e.length-1].value}" class="list_el">${n.value}</li>\n                <button id="del-list_el" value=${n.value} type="submit">X</button>\n            `,t.appendChild(l)})),e[e.length-1]})().addEventListener("click",(()=>{i(document.querySelectorAll(".draggable_item"),document.querySelectorAll(".list")),n(l()),e().forEach((e=>{e.addEventListener("click",(()=>{n(l())}))}))})),(()=>{const e=document.querySelectorAll("#del-list");return e[e.length-1].addEventListener("click",(()=>{e[e.length-1].parentElement.parentElement.parentElement.remove()})),e[e.length-1]})().addEventListener("click",(()=>{console.log("hii"),n(l())})),e().forEach((e=>{e.addEventListener("click",(()=>{console.log("hii"),n(l())}))}))}t().forEach((e=>{d(e),r++})),i(document.querySelectorAll(".draggable_item"),document.querySelectorAll(".list")),function e(){(()=>{const e=document.querySelector(".wrapper");var t=document.createElement("button");return t.setAttribute("class","addBtn"),t.innerText="+",e.appendChild(t),t})().addEventListener("click",(()=>{(()=>{const e=document.querySelector(".wrapper");var t=document.createElement("div");t.setAttribute("class","modal");var n=document.createElement("input");n.setAttribute("class","modal-input"),n.placeholder="List Title";var l=document.createElement("button");l.setAttribute("class","modal-btn"),l.innerText="ADD";var i=document.createElement("button");return i.setAttribute("class","modal-close"),i.innerText="X",e.appendChild(t),t.appendChild(n),t.appendChild(l),t.appendChild(i),[l,i]})().map(((l,i)=>{0===i?l.addEventListener("click",(()=>{d({index:r,title:document.querySelector(".modal-input").value,items:[]}),function(e){n([...t(),e])}({index:r,title:document.querySelector(".modal-input").value,items:[]}),document.querySelector(".modal").remove(),e(),r++})):l.addEventListener("click",(()=>{document.querySelector(".modal").remove(),e()}))})),document.querySelector(".addBtn").remove()}))}(),document.addEventListener("dragend",(()=>{n(l())}))})();